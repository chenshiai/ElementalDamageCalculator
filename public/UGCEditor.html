<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åƒæ˜Ÿå¥‡åŸŸæ–‡æœ¬ç¼–è¾‘å™¨v20251118</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5px;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            height: 98vh;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 12px;
            text-align: center;
            flex-shrink: 0;
        }

        .header h1 {
            font-size: 26px;
            margin-bottom: 3px;
        }

        .header p {
            opacity: 0.9;
            font-size: 13px;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            flex-shrink: 0;
        }

        .tool-group {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tool-group label {
            font-size: 13px;
            color: #495057;
            margin-right: 4px;
        }

        button {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            background-color: #4b6cb7;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 13px;
        }

        button:hover {
            background-color: #3a5999;
        }

        .color-presets {
            display: flex;
            gap: 4px;
        }

        .color-preset {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-preset:hover {
            border-color: #333;
        }

        .color-picker-container {
            position: relative;
        }

        #colorPicker {
            width: 26px;
            height: 26px;
            border: none;
            background: none;
            cursor: pointer;
        }

        select {
            padding: 5px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: white;
            font-size: 13px;
        }

        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 8px;
            flex-grow: 1;
            overflow: hidden;
            gap: 10px;
        }

        .input-section,
        .preview-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .section-title {
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
            display: flex;
            align-items: center;
            flex-shrink: 0;
            height: 32px;
        }

        .section-title i {
            margin-right: 6px;
            color: #4b6cb7;
        }
        /* è‡ªå®šä¹‰radioæ ·å¼ */
        .section-title input[type="radio"] {
            display: none;
        }

        .section-title label {
            display: inline-block;
            padding: 4px 12px;
            margin: 0 4px;
            border-radius: 16px;
            background-color: #e9ecef;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .section-title label:hover {
            background-color: #dee2e6;
        }

        .section-title input[type="radio"]:checked + label {
            background-color: #4b6cb7;
            color: white;
        }

        textarea {
            width: 100%;
            flex-grow: 1;
            padding: 12px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            font-size: 16px;
            resize: none;
            transition: border 0.3s;
            line-height: 1.5;
            font-family: monospace;
            min-height: 0;
            /* å…è®¸flexç¼©å° */
        }

        textarea:focus {
            border-color: #4b6cb7;
            outline: none;
        }

        .preview-container {
            width: 100%;
            flex-grow: 1;
            padding: 12px;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            background-color: #f9fafb;
            overflow-y: auto;
            line-height: 1.6;
            min-height: 0;
            font-size: 20px;
        }
        .preview-area {
            width: 100%;
            line-height: 1.6;
            min-height: 0;
            font-size: 20px;
        }

        .help-section {
            width: 100%;
            padding: 10px;
            background-color: #f0f4f8;
            border-radius: 8px;
            flex-shrink: 0;
            margin-top: 5px;
        }

        .help-title {
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background-color: white;
            padding: 5px 10px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 12px;
            display: flex;
            align-items: center;
        }

        .tag code {
            background-color: #f1f3f4;
            padding: 2px 5px;
            border-radius: 4px;
            margin: 0 4px;
            font-family: monospace;
        }

        .tag-example {
            color: #666;
            font-size: 11px;
            margin-left: 4px;
        }

        .buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-shrink: 0;
        }

        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .copy-notification.show {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }

            .input-section,
            .preview-section {
                width: 100%;
                min-height: 40vh;
            }

            .toolbar {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        .item-name,
        .item-icon,
        .item-tag,
        .item-desc {
            display: none;
        }
        .item-preview {
            width: 490px;
            border-radius: 0;
            padding: 0;
            background-color: transparent;
            .item-name,
            .item-icon,
            .item-tag,
            .item-desc {
                padding: 0 30px;
                display: block;
            }
            .item-name {
                line-height: 60px;
                background-color: #bdbdbd;
            }
            .item-icon {
                line-height: 225px;
                background-color: #ebebeb;
            }
            .item-tag {
                line-height: 80px;
                background-color: #f5f5f5;
            }
            .preview-area {
                padding: 0 30px;
                /* letter-spacing: 4px; */
            }
        }
        .popup-preview {
            background-color: #3E4556;
            color: #fff;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>åƒæ˜Ÿå¥‡åŸŸæ–‡æœ¬ç¼–è¾‘å™¨v20251124</h1>
            <p>é€‰æ‹©æ–‡æœ¬åä½¿ç”¨å·¥å…·æ æ’å…¥æ ‡ç­¾ï¼Œæˆ–ç›´æ¥è¾“å…¥æ ‡ç­¾</p>
        </div>

        <div class="toolbar">
            <div class="tool-group">
                <label>é¢œè‰²:</label>
                <div class="color-presets">
                    <div class="color-preset" title="æ ‡é¢˜/æ¬¡è¦æ–‡å­—" style="background-color: #d3bc8e;" data-color="#d3bc8e"></div>
                    <div class="color-preset" title="æ·±è‰²èƒŒæ™¯-å…³é”®å­—1" style="background-color: #ffcc33;" data-color="#ffcc33"></div>
                    <div class="color-preset" title="æ·±è‰²èƒŒæ™¯-å…³é”®å­—2" style="background-color: #37ffff;" data-color="#37ffff"></div>
                    <div class="color-preset" title="è­¦ç¤ºæ–‡å­—" style="background-color: #ff5e41;" data-color="#ff5e41"></div>
                    <div class="color-preset" title="æµ…è‰²èƒŒæ™¯-å…³é”®å­—1" style="background-color: #f39000;" data-color="#f39000"></div>
                    <div class="color-preset" title="æµ…è‰²èƒŒæ™¯-å…³é”®å­—2" style="background-color: #3399cc;" data-color="#3399cc"></div>
                    <div class="color-preset" title="ç«å…ƒç´ " style="background-color: #ff6666;" data-color="#ff6666"></div>
                    <div class="color-preset" title="æ°´å…ƒç´ " style="background-color: #6495ed;" data-color="#6495ed"></div>
                    <div class="color-preset" title="é›·å…ƒç´ " style="background-color: #b380ff;" data-color="#b380ff"></div>
                    <div class="color-preset" title="å†°å…ƒç´ " style="background-color: #55ddff;" data-color="#55ddff"></div>
                    <div class="color-preset" title="é£å…ƒç´ " style="background-color: #5ddac1;" data-color="#5ddac1"></div>
                    <div class="color-preset" title="å²©å…ƒç´ " style="background-color: #ffcc00;" data-color="#ffcc00"></div>
                    <div class="color-preset" title="è‰å…ƒç´ " style="background-color: #3cff00;" data-color="#3cff00"></div>
                </div>
                <div class="color-picker-container">
                    <input type="color" id="colorPicker" value="#d3bc8e">
                </div>
                <button id="applyColor">åº”ç”¨é¢œè‰²</button>
            </div>

            <div class="tool-group">
                <button id="applyItalic">æ–œä½“</button>
            </div>

            <div class="tool-group">
                <label>å­—å·:</label>
                <select id="fontSize">
                    <option value="12">12px</option>
                    <option value="14">14px</option>
                    <option value="16">16px</option>
                    <option value="18">18px</option>
                    <option value="20" selected>20px</option>
                    <option value="24">24px</option>
                    <option value="28">28px</option>
                    <option value="32">32px</option>
                </select>
                <button id="applySize">åº”ç”¨å­—å·</button>
            </div>

            <div class="tool-group">
                <button id="applyBold">åŠ ç²—</button>
            </div>

            <div class="tool-group">
                <button id="insertNewline">æ’å…¥\næ¢è¡Œç¬¦</button>
            </div>
            <div class="tool-group">æç¤ºï¼š{æ’å…¥å˜é‡}åçš„æ¢è¡Œéœ€è¦ä½¿ç”¨\næ¢è¡Œç¬¦</div>
        </div>

        <div class="content">
            <div class="input-section">
                <h2 class="section-title">
                    <i>ğŸ“</i> è¾“å…¥åŒºåŸŸ
                </h2>
                <textarea id="inputText" placeholder="åœ¨è¿™é‡Œè¾“å…¥æ–‡æœ¬ï¼Œä½¿ç”¨å·¥å…·æ æ’å…¥æ ‡ç­¾æˆ–ç›´æ¥è¾“å…¥æ ‡ç­¾..."></textarea>
                <div class="buttons">
                    <button id="clearBtn">æ¸…ç©ºå†…å®¹</button>
                    <button id="exampleBtn">æ’å…¥ç¤ºä¾‹</button>
                    <button id="copyBtn">å¤åˆ¶å†…å®¹</button>
                </div>
            </div>

            <div class="preview-section">
                <h2 class="section-title">
                    <input type="radio" id="normal-preview" name="preview-mode" value="normal" checked>
                    <label for="normal-preview">
                        <i>ğŸ‘ï¸</i>å¸¸è§„é¢„è§ˆ
                    </label>
                    <input type="radio" id="item-preview" name="preview-mode" value="item">
                    <label for="item-preview">
                        <i>ğŸ‘ï¸</i>é“å…·é¢„è§ˆ
                    </label>
                    <input type="radio" id="popup-preview" name="preview-mode" value="popup">
                    <label for="popup-preview">
                        <i>ğŸ‘ï¸</i>å¼¹çª—é¢„è§ˆ
                    </label>
                </h2>
                <div class="preview-container">
                    <div class="item-name">é“å…·åç§°</div>
                    <div class="item-icon">é“å…·å›¾æ ‡</div>
                    <div class="item-tag">é“å…·æ ‡ç­¾</div>
                    <div class="item-desc">é“å…·æè¿°ï¼š</div>
                    <div id="preview" class="preview-area"></div>
                </div>
            </div>
        </div>

        <div class="help-section">
            <h2 class="help-title">æ”¯æŒçš„æ ‡ç­¾</h2>
            <div class="tags">
                <div class="tag">
                    ä¿®æ”¹é¢œè‰²: <code>&lt;color=#fff&gt;å†…å®¹&lt;/color&gt;</code>
                    <span class="tag-example">ä¾‹å¦‚: &lt;color=#d3bc8e&gt;çº¢è‰²æ–‡å­—&lt;/color&gt;</span>
                </div>
                <div class="tag">
                    æ–œä½“: <code>&lt;i&gt;å†…å®¹&lt;/i&gt;</code>
                </div>
                <div class="tag">
                    ä¿®æ”¹å­—å·: <code>&lt;size=14&gt;å†…å®¹&lt;/size&gt;</code>
                    <span class="tag-example">ä¾‹å¦‚: &lt;size=20&gt;å¤§å·æ–‡å­—&lt;/size&gt;</span>
                </div>
                <div class="tag">
                    åŠ ç²—: <code>&lt;b&gt;å†…å®¹&lt;/b&gt;</code>
                </div>
                <div class="tag">
                    æ¢è¡Œ: <code>\n</code>æˆ–å›è½¦
                </div>
            </div>
        </div>
    </div>

    <div class="copy-notification" id="copyNotification">å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const inputText = document.getElementById('inputText');
            const preview = document.getElementById('preview');
            const clearBtn = document.getElementById('clearBtn');
            const exampleBtn = document.getElementById('exampleBtn');
            const copyBtn = document.getElementById('copyBtn');
            const copyNotification = document.getElementById('copyNotification');
            const applyColor = document.getElementById('applyColor');
            const applyItalic = document.getElementById('applyItalic');
            const applySize = document.getElementById('applySize');
            const applyBold = document.getElementById('applyBold');
            const insertNewline = document.getElementById('insertNewline');
            const colorPicker = document.getElementById('colorPicker');
            const fontSize = document.getElementById('fontSize');
            const colorPresets = document.querySelectorAll('.color-preset');

            let selectedColor = '#d3bc8e';

            // åˆå§‹æ¸²æŸ“
            updatePreview();

            // ç›‘å¬è¾“å…¥å˜åŒ–
            inputText.addEventListener('input', updatePreview);

            // æ¸…ç©ºæŒ‰é’®
            clearBtn.addEventListener('click', function () {
                inputText.value = '';
                updatePreview();
            });

            // ç¤ºä¾‹æŒ‰é’®
            exampleBtn.addEventListener('click', function () {
                inputText.value = `è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ï¼š\n\n<color=#d3bc8e>è¿™æ®µæ–‡å­—æ˜¯æ ‡é¢˜/æ¬¡è¦æ–‡å­—è‰²çš„</color>\n<i>è¿™æ®µæ–‡å­—æ˜¯æ–œä½“</i>\n<size=20>è¿™æ®µæ–‡å­—å­—å·ä¸º20</size>\n<b>è¿™æ®µæ–‡å­—æ˜¯ç²—ä½“</b>\n\nä½¿ç”¨\\nè¿›è¡Œæ¢è¡Œ\nè¿™æ˜¯æ–°çš„ä¸€è¡Œ\n\n<color=#009900><b><i>ç»„åˆä½¿ç”¨å¤šç§æ ·å¼</i></b></color>`;
                updatePreview();
            });

            // é¢„è§ˆæ¨¡å¼åˆ‡æ¢äº‹ä»¶
            const previewModeRadios = document.querySelectorAll('input[name="preview-mode"]');
            previewModeRadios.forEach(radio => {
                radio.addEventListener('change', updatePreview);
            });

            // å¤åˆ¶æŒ‰é’®
            copyBtn.addEventListener('click', function () {
                copyToClipboard(inputText.value);
            });

            // é¢œè‰²é¢„è®¾ç‚¹å‡»äº‹ä»¶
            colorPresets.forEach(preset => {
                preset.addEventListener('click', function () {
                    selectedColor = this.getAttribute('data-color');
                    colorPicker.value = selectedColor;
                });
            });

            // é¢œè‰²é€‰æ‹©å™¨å˜åŒ–äº‹ä»¶
            colorPicker.addEventListener('input', function () {
                selectedColor = this.value;
            });

            // åº”ç”¨é¢œè‰²æŒ‰é’®
            applyColor.addEventListener('click', function () {
                wrapSelectedText(`<color=${selectedColor}>`, `</color>`);
            });

            // åº”ç”¨æ–œä½“æŒ‰é’®
            applyItalic.addEventListener('click', function () {
                wrapSelectedText('<i>', '</i>');
            });

            // åº”ç”¨å­—å·æŒ‰é’®
            applySize.addEventListener('click', function () {
                const size = fontSize.value;
                wrapSelectedText(`<size=${size}>`, `</size>`);
            });

            // åº”ç”¨åŠ ç²—æŒ‰é’®
            applyBold.addEventListener('click', function () {
                wrapSelectedText('<b>', '</b>');
            });

            // æ’å…¥æ¢è¡Œç¬¦æŒ‰é’®
            insertNewline.addEventListener('click', function () {
                insertAtCursor('\\n');
            });

            // é˜²æ­¢å›è½¦é”®æ¢è¡Œ
            inputText.addEventListener('keydown', function (e) {
                if (e.key === 'Enter') {
                    // e.preventDefault();
                    // æ’å…¥\nè€Œä¸æ˜¯æ¢è¡Œ
                    // insertAtCursor('\\n');
                }
            });

            // å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(function () {
                    // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                    copyNotification.classList.add('show');
                    setTimeout(function () {
                        copyNotification.classList.remove('show');
                    }, 2000);
                }, function (err) {
                    // å¦‚æœç°ä»£APIå¤±è´¥ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•
                    fallbackCopyTextToClipboard(text);
                });
            }

            // ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•
            function fallbackCopyTextToClipboard(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.opacity = 0;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        copyNotification.classList.add('show');
                        setTimeout(function () {
                            copyNotification.classList.remove('show');
                        }, 2000);
                    }
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥: ', err);
                }

                document.body.removeChild(textArea);
            }

            // åœ¨å…‰æ ‡ä½ç½®æ’å…¥æ–‡æœ¬
            function insertAtCursor(text) {
                const start = inputText.selectionStart;
                const end = inputText.selectionEnd;
                const value = inputText.value;

                inputText.value = value.substring(0, start) + text + value.substring(end);
                inputText.selectionStart = inputText.selectionEnd = start + text.length;
                inputText.focus();
                updatePreview();
            }

            // åŒ…è£…é€‰ä¸­çš„æ–‡æœ¬
            function wrapSelectedText(prefix, suffix) {
                const start = inputText.selectionStart;
                const end = inputText.selectionEnd;
                const selectedText = inputText.value.substring(start, end);

                if (selectedText) {
                    // æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œç›´æ¥åŒ…è£…
                    inputText.value = inputText.value.substring(0, start) +
                        prefix + selectedText + suffix +
                        inputText.value.substring(end);
                    inputText.selectionStart = start;
                    inputText.selectionEnd = start + prefix.length + selectedText.length + suffix.length;
                } else {
                    // æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼Œæ’å…¥ç©ºæ ‡ç­¾å¹¶å°†å…‰æ ‡æ”¾åœ¨ä¸­é—´
                    inputText.value = inputText.value.substring(0, start) +
                        prefix + suffix +
                        inputText.value.substring(end);
                    inputText.selectionStart = inputText.selectionEnd = start + prefix.length;
                }

                inputText.focus();
                updatePreview();
            }

            function updatePreview() {
                let content = inputText.value;
                const currentMode = document.querySelector('input[name="preview-mode"]:checked').value;
                const previewContainer = document.querySelector('.preview-container');

                // å¤„ç†æ¢è¡Œç¬¦ - æ”¯æŒè¾“å…¥\\næˆ–ç›´æ¥å›è½¦æ¢è¡Œ
            content = content.replace(/\\n|\n/g, '<br>');

                    content = content.replace(/<color=([^>]+?)>(.*?)<\/color>/g, '<span style="color: $1">$2</span>');
                    content = content.replace(/<i>(.*?)<\/i>/g, '<i>$1</i>');
                    content = content.replace(/<size=(\d+)>(.*?)<\/size>/g, '<span style="font-size: $1px">$2</span>');
                    content = content.replace(/<b>(.*?)<\/b>/g, '<b>$1</b>');
                // æ ¹æ®ä¸åŒé¢„è§ˆæ¨¡å¼å¤„ç†å†…å®¹
                if (currentMode === 'normal') {
                    previewContainer.classList.remove('item-preview');
                    previewContainer.classList.remove('popup-preview');
                } else if (currentMode === 'item') {
                    // é“å…·é¢„è§ˆï¼šå¤„ç†åŸºæœ¬æ ‡ç­¾ + é“å…·ç›¸å…³æ ‡ç­¾
                    previewContainer.classList.remove('popup-preview');
                    previewContainer.classList.add('item-preview');
                } else if (currentMode === 'popup') {
                    previewContainer.classList.remove('item-preview');
                    previewContainer.classList.add('popup-preview');
                }

                // æ›´æ–°é¢„è§ˆåŒºåŸŸ
                preview.innerHTML = content;
            }
        });
    </script>
</body>

</html>